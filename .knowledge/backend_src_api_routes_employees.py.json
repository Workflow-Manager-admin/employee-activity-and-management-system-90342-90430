{"is_source_file": true, "format": "Python", "description": "This is a FastAPI route module defining API endpoints for managing employee records within an employee management system. It includes functions for creating, retrieving, updating, deleting, and listing employees, as well as fetching direct reports for managers. The file interacts with storage and authentication modules, handles HTTP exceptions, and uses Pydantic models for request and response schemas.", "external_files": ["../models", "../storage", "../auth"], "external_methods": ["get_current_user", "get_admin_user", "can_access_employee_data"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "FastAPI's router class used to define API endpoints"}], "methods": [{"name": "create_employee( employee_data: EmployeeCreate, current_user: Employee = Depends(get_admin_user) )", "description": "Creates a new employee record, restricted to admin users, and logs the creation.", "scope": "", "scopeKind": ""}, {"name": "get_all_employees( active_only: bool = True, current_user: Employee = Depends(get_admin_user) )", "description": "Retrieves all employees, optionally filtering for active only, restricted to admin users.", "scope": "", "scopeKind": ""}, {"name": "get_current_employee(current_user: Employee = Depends(get_current_user))", "description": "Returns the current user's employee info.", "scope": "", "scopeKind": ""}, {"name": "get_employee( employee_id: str, current_user: Employee = Depends(get_current_user) )", "description": "Fetches employee data by ID if access permissions are met.", "scope": "", "scopeKind": ""}, {"name": "update_employee( employee_id: str, employee_update: EmployeeUpdate, current_user: Employee = Depends(get_current_user) )", "description": "Updates employee details, with role change restrictions, and logs updates.", "scope": "", "scopeKind": ""}, {"name": "delete_employee( employee_id: str, current_user: Employee = Depends(get_admin_user) )", "description": "Performs a soft delete (deactivation) of an employee, restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "get_direct_reports( manager_id: str, current_user: Employee = Depends(get_current_user) )", "description": "Lists direct reports for a specified manager with access restricted appropriately.", "scope": "", "scopeKind": ""}], "calls": ["storage.create_employee", "storage.create_audit_entry", "storage.get_all_employees", "storage.get_employee", "storage.update_employee", "storage.delete_employee"], "search-terms": ["FastAPI employee routes", "employee management endpoints", "admin-only employee actions", "direct reports API", "employee data access control"], "state": 2, "file_id": 9, "knowledge_revision": 19, "git_revision": "", "ctags": [{"_type": "tag", "name": "create_employee", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def create_employee($/", "language": "Python", "kind": "function", "signature": "( employee_data: EmployeeCreate, current_user: Employee = Depends(get_admin_user) )"}, {"_type": "tag", "name": "delete_employee", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def delete_employee($/", "language": "Python", "kind": "function", "signature": "( employee_id: str, current_user: Employee = Depends(get_admin_user) )"}, {"_type": "tag", "name": "get_all_employees", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def get_all_employees($/", "language": "Python", "kind": "function", "signature": "( active_only: bool = True, current_user: Employee = Depends(get_admin_user) )"}, {"_type": "tag", "name": "get_current_employee", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def get_current_employee(current_user: Employee = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(current_user: Employee = Depends(get_current_user))"}, {"_type": "tag", "name": "get_direct_reports", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def get_direct_reports($/", "language": "Python", "kind": "function", "signature": "( manager_id: str, current_user: Employee = Depends(get_current_user) )"}, {"_type": "tag", "name": "get_employee", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def get_employee($/", "language": "Python", "kind": "function", "signature": "( employee_id: str, current_user: Employee = Depends(get_current_user) )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^router = APIRouter(prefix=\"\\/employees\", tags=[\"employees\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_employee", "path": "/home/kavia/workspace/code-generation/employee-activity-and-management-system-90342-90430/backend/src/api/routes/employees.py", "pattern": "/^async def update_employee($/", "language": "Python", "kind": "function", "signature": "( employee_id: str, employee_update: EmployeeUpdate, current_user: Employee = Depends(get_current_user) )"}], "hash": "7c38c203f30f8b3b6d069090531c365a", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routes/employees.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/employees\", tags=[\"employees\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"19": ""}]}